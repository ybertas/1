<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uçak Oyunu – Sürüklemeli Kontrol</title>
    <style>
        :root {
            --bg: #E0F7FA;
            --banner: #0288D1;
            --btn: #0288D1;
            --btnText: #FFF;
            --font: 'Open Sans', sans-serif;
        }
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { width: 100vw; height: 100vh; overflow: hidden; font-family: var(--font); background: var(--bg); }
        #container {
            max-width: 1024px;
            max-height: 768px;
            width: 100%;
            height: 100%;
            margin: auto;
            display: flex;
            flex-direction: column;
        }
        #banner {
            padding: 1vh;
            background: var(--banner);
            color: white;
            text-align: center;
            font-size: 2.5vh;
            flex: none;
        }
        #game-area {
            position: relative;
            flex: 1;
            background: skyblue;
            overflow: hidden;
        }
        #score {
            position: absolute;
            top: 2vh; right: 2vh; /* Göstergeyi daha büyük yapmak için konum ve boyut güncellendi */
            background: rgba(255,255,255,0.8);
            padding: 1vh 2vh; /* Göstergeyi daha büyük yapmak için dolgu güncellendi */
            border-radius: 1vh;
            font-size: 3vh; /* Skor metni daha büyük */
            font-weight: bold;
            z-index: 10;
        }
        #hearts {
            position: absolute;
            top: 2vh; left: 2vh; /* Kalpleri daha büyük yapmak için konum ve boşluk güncellendi */
            display: flex;
            gap: 1vh; /* Kalpler arasındaki boşluk artırıldı */
            z-index: 10;
        }
        #hearts div {
            width: 3vh; height: 3vh; /* Kalpler daha büyük */
            background: red;
            clip-path: polygon(50% 0%,61% 30%,98% 35%,68% 58%,79%91%,50%75%,21%91%,32%59%,2%35%,39%30%);
        }
        .modal-overlay {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.6);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none;
            transition: opacity 0.3s;
            z-index: 100;
        }
        .modal-overlay.show {
            opacity: 1; pointer-events: auto;
        }
        .modal {
            background: white;
            border-radius: 2vh;
            padding: 2vh;
            text-align: center;
            width: 90%;
            max-width: 400px;
            font-size: 2vh;
        }
        .modal button {
            margin-top: 2vh;
            padding: 1vh 2vh;
            font-size: 2vh;
            background: var(--btn);
            color: var(--btnText);
            border: none;
            border-radius: 1vh;
            cursor: pointer;
        }
        #plane {
            position: absolute;
            width: 12vw; max-width: 120px;
            left: 5vw; top: 40%;
            touch-action: none;
            cursor: grab;
            z-index: 10;
        }
        .cloud {
            position: absolute;
            font-size: 2vh;
            font-weight: bold;
            color: #333;
            background: url('https://images.freeimages.com/vhq/images/previews/4c5/nuage-cloud-133980.png') no-repeat center;
            background-size: cover;
            width: 120px; height: 90px;
            display: flex; align-items: center; justify-content: center;
            z-index: 5;
        }
        .cloud.correct::after {
            content: "✔️";
            position: absolute;
            top: -1vh; right: -1vh;
            font-size: 2vh;
        }
        .shake-strong {
            animation: shake 0.6s;
        }
        @keyframes shake {
            0% { transform: translate(4px, 4px); }
            25% { transform: translate(-4px, -4px); }
            50% { transform: translate(4px, -4px); }
            75% { transform: translate(-4px, 4px); }
            100% { transform: translate(0, 0); }
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="banner">Çift Bulutları Topla!</div>
        <div id="game-area">
            <div id="score">Doğru: <span id="scoreCount">0</span></div>
            <div id="hearts"></div>
            <img id="plane" src="ucak.png" alt="Uçak">
        </div>
        <div id="modal-start" class="modal-overlay show">
            <div class="modal">
                <h2>Nasıl Oynanır?</h2>
                <p>Uçağa basılı tut ve yukarı/aşağı sürükleyerek kontrol et.</p>
                <button id="btn-start">Oyuna Başla</button>
            </div>
        </div>
        <div id="modal-win" class="modal-overlay"><div class="modal"><h2>Tebrikler!</h2><p>10 doğru yaptın!</p><button id="btn-restart-win">Yeniden Başla</button></div></div>
        <div id="modal-lose" class="modal-overlay"><div class="modal"><h2>Üzgünüm...</h2><p>3 yanlış yaptın.</p><button id="btn-restart-lose">Yeniden Başla</button></div></div>
    </div>
    <audio id="sound-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-positive-game-tone-2587.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-2586.mp3"></audio>
    <script>
        // Oyun değişkenlerini tanımla
        let correct = 0;
        let wrong = 0;
        let game = false;
        let cloudInterval;
        const maxWrong = 3;
        const maxCorrect = 10;
        
        // DOM elementlerini al
        const plane = document.getElementById("plane");
        const area = document.getElementById("game-area");
        const scoreEl = document.getElementById("scoreCount");
        const heartsEl = document.getElementById("hearts");
        
        const mods = {
            start: document.getElementById("modal-start"),
            win: document.getElementById("modal-win"),
            lose: document.getElementById("modal-lose")
        };
        
        const sounds = {
            correct: document.getElementById("sound-correct"),
            wrong: document.getElementById("sound-wrong")
        };

        // Sürükleme değişkenleri
        let dragging = false;
        let offsetY = 0;

        // Oyun durumunu güncelleyen fonksiyon
        function updateStatus() {
            scoreEl.textContent = correct;
            heartsEl.innerHTML = '';
            for (let i = 0; i < maxWrong - wrong; i++) {
                heartsEl.appendChild(document.createElement('div'));
            }
        }

        // Modalları gösterip gizleyen fonksiyon
        function showModal(type) {
            Object.values(mods).forEach(m => m.classList.remove('show'));
            if (type) {
                mods[type].classList.add('show');
            }
        }

        // Bulutları oluşturan fonksiyon
        function createCloud() {
            if (area.querySelectorAll('.cloud').length >= 6) {
                return;
            }
            const n = Math.floor(Math.random() * 50);
            const top = Math.random() * (area.clientHeight - 100);
            const left = area.clientWidth + 50;
            const c = document.createElement('div');
            c.className = 'cloud';
            c.dataset.num = n;
            c.style.top = top + 'px';
            c.style.left = left + 'px';
            c.innerText = n;
            area.appendChild(c);
        }

        // Ana oyun döngüsü
        function gameLoop() {
            area.querySelectorAll('.cloud').forEach(c => {
                c.style.left = (parseFloat(c.style.left) - 2) + 'px';
                if (parseFloat(c.style.left) + c.clientWidth < 0) {
                    c.remove();
                }
                if (!c.classList.contains('hit')) {
                    const pr = plane.getBoundingClientRect();
                    const cr = c.getBoundingClientRect();
                    // Çarpışma kontrolü
                    if (!(pr.right < cr.left || pr.left > cr.right || pr.bottom < cr.top || pr.top > cr.bottom)) {
                        c.classList.add('hit');
                        const num = parseInt(c.dataset.num);
                        if (num % 2 === 0) {
                            c.classList.add('correct');
                            sounds.correct.play();
                            correct++;
                            updateStatus();
                            if (correct >= maxCorrect) {
                                game = false;
                                clearInterval(cloudInterval);
                                showModal('win');
                            }
                        } else {
                            sounds.wrong.play();
                            wrong++;
                            updateStatus();
                            area.classList.add('shake-strong');
                            setTimeout(() => area.classList.remove('shake-strong'), 600);
                            if (wrong >= maxWrong) {
                                game = false;
                                clearInterval(cloudInterval);
                                showModal('lose');
                            }
                        }
                    }
                }
            });
            if (game) {
                requestAnimationFrame(gameLoop);
            }
        }

        // Oyunu başlatan fonksiyon
        function startGame() {
            correct = 0;
            wrong = 0;
            game = true;
            updateStatus();
            area.querySelectorAll('.cloud').forEach(c => c.remove());
            showModal();
            cloudInterval = setInterval(createCloud, 1200);
            requestAnimationFrame(gameLoop);
        }

        // Fare ve Dokunmatik Sürükleme Kontrolü
        plane.addEventListener('mousedown', e => {
            if (game) {
                dragging = true;
                offsetY = e.clientY - plane.getBoundingClientRect().top;
                plane.style.cursor = 'grabbing';
            }
        });

        // Fare hareketini oyun alanı üzerinde dinle
        area.addEventListener('mousemove', e => {
            if (!dragging) {
                return;
            }
            const rect = area.getBoundingClientRect();
            let y = e.clientY - rect.top - offsetY;
            y = Math.max(0, Math.min(area.clientHeight - plane.clientHeight, y));
            plane.style.top = y + 'px';
        });

        // Fare bırakıldığında sürüklemeyi durdur
        window.addEventListener('mouseup', () => {
            dragging = false;
            plane.style.cursor = 'grab';
        });

        // Dokunmatik sürükleme kontrolü
        plane.addEventListener('touchstart', e => {
            if (game) {
                dragging = true;
                offsetY = e.touches[0].clientY - plane.getBoundingClientRect().top;
            }
        }, { passive: false });

        // Dokunma hareketini oyun alanı üzerinde dinle
        area.addEventListener('touchmove', e => {
            if (!dragging) {
                return;
            }
            e.preventDefault();
            const rect = area.getBoundingClientRect();
            let y = e.touches[0].clientY - rect.top - offsetY;
            y = Math.max(0, Math.min(area.clientHeight - plane.clientHeight, y));
            plane.style.top = y + 'px';
        }, { passive: false });

        // Parmak kaldırıldığında sürüklemeyi durdur
        window.addEventListener('touchend', () => {
            dragging = false;
        });

        // Buton olayları
        document.getElementById('btn-start').onclick = startGame;
        document.getElementById('btn-restart-win').onclick = startGame;
        document.getElementById('btn-restart-lose').onclick = startGame;
    </script>
</body>
</html>
