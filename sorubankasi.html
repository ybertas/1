<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fen Bilgisi Bilgi Yarışması 🧪</title>
    <!-- Harici font (Türkçe karakter uyumlu) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* SCORM 1.2 Uyumluluğu için
           Bu kod SCORM API çağrılarını içermez, ancak iframe içinde stabil çalışacak şekilde tasarlanmıştır.
           Gerekirse SCORM API fonksiyonları buraya eklenebilir (örn. SetValue, GetValue). */

        /* Genel Stil ve Temel Yapı */
        :root {
            --primary-color: #44bfa3;
            --secondary-color: #ffad05;
            --accent-color: #5561f5;
            --bg-gradient: linear-gradient(120deg,#e0f6fa,#b7d9f6 75%,#fff9e0 100%);
            --correct-color: #56d356;
            --wrong-color: #f45151;
            --glass-bg: rgba(255,255,255,0.85);
            --card-shadow: 0 4px 32px 0 rgba(70,130,180,0.13);
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            overflow: hidden; 
            color: #333;
            box-sizing: border-box;
            font-size: 16px;
        }

        /* Maksimum Boyut Sınırlaması */
        .game-wrapper {
            width: 100%;
            height: 100%;
            max-width: 1024px;
            max-height: 768px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            padding: 1vw; /* Ekran boyutuna duyarlı padding */
        }

        /* Ana Oyun Konteyneri */
        .game-container {
            background: var(--glass-bg);
            border-radius: 2.3rem;
            box-shadow: var(--card-shadow);
            padding: 2vw 3vw;
            transition: box-shadow 0.3s;
            width: 95%; /* Responsive genişlik */
            height: 95%; /* Responsive yükseklik */
            display: flex;
            flex-direction: column;
            text-align: center;
            position: relative;
            opacity: 0;
            transform: translateY(2vh);
            animation: fadeIn 0.8s forwards;
            box-sizing: border-box;
        }

        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* Bilim İkonları (Çocuk Dostu) */
        .science-icon {
            position: absolute;
            font-size: 3.5rem !important;
            filter: drop-shadow(1px 4px 8px #c7c7f682);
            pointer-events: none;
            animation: float 8s infinite alternate ease-in-out;
        }
        
        .science-icon:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .science-icon:nth-child(2) { top: 20%; right: 8%; animation-delay: 2s; }
        .science-icon:nth-child(3) { bottom: 15%; left: 10%; animation-delay: 4s; }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-2vh) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        /* Başlangıç Ekranı */
        .start-screen, .quiz-screen, .result-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }

        .start-screen h1 {
            color: var(--primary-color);
            text-shadow: 1px 3px 6px #bcf3e0;
            letter-spacing: 1px;
            font-size: clamp(1.5rem, 4vw, 3rem); /* Duyarlı font boyutu */
            margin-bottom: 2vh;
        }

        .start-screen p {
            font-size: clamp(0.9rem, 1.8vw, 1.2rem);
            color: #555;
            margin-bottom: 3vh;
        }

        /* Buton Stili (Ortak) */
        .start-button, .restart-button, .modal-start-button, .next-button {
            background: linear-gradient(90deg, var(--accent-color) 40%, var(--secondary-color) 100%);
            color: #fff;
            font-weight: bold;
            letter-spacing: .04em;
            border: none;
            border-radius: 1.3rem;
            font-size: 1.1rem;
            padding: 1.3em 2.3em;
            box-shadow: 0 2px 12px 0 #b7d9f6a9;
            cursor: pointer;
            margin: .6em 0;
            transition: transform 0.14s, box-shadow 0.25s;
        }

        .start-button:hover, .restart-button:hover, .modal-start-button:hover, .next-button:hover {
            transform: scale(1.07);
            box-shadow: 0 4px 24px 0 #b7d9f6cc;
        }

        /* Üst Bilgi */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 2vh;
        }
        
        .score-container {
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .progress-bar-container {
            flex-grow: 1; /* Kalan alanı kapla */
            height: 1.5vh;
            background-color: #f0f0f0;
            border-radius: 1vh;
            margin: 0 2vw;
            box-shadow: inset 0 0.1vh 0.3vh rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            height: 18px;
            background: linear-gradient(90deg, #4caf50, #ffeb3b);
            border-radius: 8px;
            box-shadow: 0 2px 10px #81eb8144;
            transition: width .4s;
        }

        /* Soru ve Seçenekler */
        .question-card {
            background-color: #f9f9f9;
            padding: 1.5vh 2vh; /* Padding küçültüldü */
            border-radius: 1vh;
            margin-bottom: 2vh;
            box-shadow: 0 0.5vh 1.5vh rgba(0, 0, 0, 0.08);
            width: 100%;
            flex-shrink: 1; /* Esnek küçülme */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .question-card h2 {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem); /* Soru metni font boyutu büyütüldü */
            color: var(--accent-color);
            line-height: 1.4;
            text-align: center;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr; /* Başlangıçta tek sütun */
            gap: 1.5vh;
            width: 100%;
        }
        
        @media (min-width: 600px) {
            .options-container {
                grid-template-columns: 1fr 1fr; /* Büyük ekranlarda iki sütun */
            }
        }
        
        .option-button {
            background: linear-gradient(100deg, #fff6e6 60%, var(--secondary-color) 120%);
            color: #21275a;
            font-size: 1.1rem;
            border: none;
            border-radius: 1.4rem;
            margin-bottom: .7em;
            padding: 1em 2em;
            box-shadow: 0 1px 5px #f1b56617;
            transition: background 0.15s, color 0.15s, transform 0.12s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .option-button:hover {
            transform: translateY(-0.2vh);
            box-shadow: 0 0.8vh 2vh rgba(255, 152, 0, 0.6);
        }

        .option-button.correct {
            background: linear-gradient(90deg,#56d356 70%, #81eb81 100%);
            color: #fff;
            animation: correctPulse .7s;
        }
        .option-button.wrong {
            background: linear-gradient(90deg, #ffb3b3, #f45151 95%);
            color: #fff;
            animation: shakeX .35s;
        }
        @keyframes correctPulse {
            0% {box-shadow: 0 0 0 0 #56d35688;}
            80% {box-shadow: 0 0 0 10px transparent;}
            100% {box-shadow: 0 0 0 0 transparent;}
        }
        @keyframes shakeX {
            0%, 100% {transform: translateX(0);}
            20% {transform: translateX(-9px);}
            40% {transform: translateX(8px);}
            60% {transform: translateX(-5px);}
            80% {transform: translateX(4px);}
        }
        .option-button.disabled {opacity: .7; pointer-events: none;}
        
        /* Geri Bildirim Alanı */
        .feedback-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            min-height: 10vh;
            margin-top: 1vh;
        }

        .feedback-message, .explanation {
            opacity: 0;
            transform: translateY(1vh);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .feedback-message.show, .explanation.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback-message {
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 1em;
            text-align: center;
            letter-spacing: .03em;
        }
        .feedback-message.show {
            animation: bounceIn .4s;
        }
        @keyframes bounceIn {
            0% {transform: scale(.6);}
            60% {transform: scale(1.2);}
            80% {transform: scale(0.97);}
            100% {transform: scale(1);}
        }
        
        .explanation {
            font-size: clamp(0.9rem, 1.8vw, 1rem);
            color: #666;
            margin-top: 0.5vh;
        }

        /* Sonuç Ekranı */
        .result-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            width: 100%;
            justify-content: space-between; /* Yeni eklenen stil */
        }

        .result-screen h2 {
            font-size: clamp(1.4rem, 3vw, 1.8rem);
            color: var(--primary-color);
            text-shadow: 1px 3px 6px #bcf3e0;
            letter-spacing: 1px;
            margin-bottom: 1vh; /* Boşluk azaltıldı */
        }
        
        .final-score {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: var(--secondary-color);
            margin-bottom: 0.5vh; /* Boşluk azaltıldı */
        }
        
        .detailed-results {
            width: 100%;
            flex-grow: 1;
            overflow-y: auto;
            margin-top: 1vh; /* Boşluk azaltıldı */
            padding: 1vh;
            border-radius: 1vh;
            background-color: #fcfcfc;
            border: 1px solid #eee;
            box-shadow: inset 0 0.1vh 0.5vh rgba(0,0,0,0.05);
            /* Scrollbar gizleme */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .detailed-results::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        .result-item {
            padding: 0.8vh;
            margin-bottom: 0.8vh;
            border-radius: 0.5vh;
            border-left: 0.5vh solid;
            text-align: left; /* Sola yaslı olarak değiştirildi */
        }

        .result-item.correct-answer { border-left-color: var(--correct-color); }
        .result-item.wrong-answer { border-left-color: var(--wrong-color); }
        
        .result-item p {
            font-size: clamp(0.8rem, 1.6vw, 1rem);
            margin: 0.2vh 0;
        }
        .result-item .answers-line {
            display: flex;
            align-items: center;
            gap: 1em;
            flex-wrap: wrap; /* Küçük ekranlarda alt satıra geçmesi için */
        }

        .result-screen .restart-button {
            margin-top: 2vh; /* Butonun üstündeki boşluk ayarlandı */
            margin-bottom: 1vh;
        }

        /* Modal Stili */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.show { opacity: 1; visibility: visible; }
        
        .modal-content {
            background-color: #ffffff;
            padding: 2vh;
            border-radius: 2vh;
            box-shadow: 0 1vh 3vh rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 50vh;
            text-align: center;
            transform: translateY(-2vh);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .modal-content h3 {
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: var(--accent-color);
        }

        .modal-content ul {
            font-size: clamp(0.9rem, 1.8vw, 1.1rem);
            list-style: none;
            padding: 0;
            text-align: left;
        }

        .modal-content ul li {
            margin-bottom: 1vh;
            position: relative;
            padding-left: 2.5vw;
        }
        
        .modal-content ul li::before {
            content: '👉';
            position: absolute;
            left: 0;
            color: var(--secondary-color);
        }
        
        .modal-start-button {
            margin-top: 2vh;
        }

        /* Zamanlayıcı Stili */
        .timer-container {
            font-size: 1.25rem;
            color: var(--wrong-color);
            font-weight: bold;
            letter-spacing: .04em;
            background: #fff4f4a8;
            padding: .3em 1.2em;
            border-radius: 1.1rem;
            box-shadow: 0 2px 12px 0 #f4515113;
        }
        
        @media (max-width:700px){
            .game-container {padding: 1.2em;}
            .start-screen h1, .result-screen h2 {font-size: 1.4rem;}
            .option-button, .start-button, .next-button {font-size: 1rem; padding: 1em 1.5em;}
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <!-- Bilim Temalı Arka Plan İkonları -->
        <div class="science-icon">🔬</div>
        <div class="science-icon">🧠</div>
        <div class="science-icon">🧬</div>

        <div class="game-container" id="gameContainer">
            <!-- Başlangıç Ekranı -->
            <div class="start-screen" id="startScreen">
                <h1>Fen Bilgisi Bilgi Yarışmasına Hoş Geldiniz! 🚀</h1>
                <p>Bilim bilginizi test etmeye hazır mısınız? Her doğru cevapla puan kazanın!</p>
                <button class="start-button" id="startButton">Başla</button>
            </div>

            <!-- Oyun Ekranı -->
            <div class="quiz-screen" id="quizScreen">
                <div class="header">
                    <div class="score-container">
                        <span style="font-size: 1.2em;">⭐</span> Doğru Sayısı: <span id="scoreValue">0</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="timer-container">
                        Süre: <span id="timerValue">20</span>
                    </div>
                </div>
                
                <div class="question-card" id="questionCard">
                    <h2 id="questionText">Soru Yükleniyor...</h2>
                </div>

                <div class="options-container" id="optionsContainer">
                    <!-- Seçenek butonları buraya JS ile eklenecek -->
                </div>

                <!-- Geri Bildirim Alanı -->
                <div class="feedback-area">
                    <div class="feedback-message" id="feedbackMessage"></div>
                    <div class="explanation" id="explanation"></div>
                </div>

                <button class="next-button" id="nextButton" style="display: none;">Sonraki Soru</button>
            </div>

            <!-- Sonuç Ekranı -->
            <div class="result-screen" id="resultScreen">
                <div> <!-- Başlık ve skor için yeni bir konteyner eklendi -->
                    <h2>Sorular Bitti! 🎉</h2>
                    <p>Toplam Skorunuz: <span class="final-score" id="finalScore">0/0</span></p>
                    <p class="score-comment" id="scoreComment"></p>
                </div>
                <div id="detailedResults" class="detailed-results">
                    <h3>Detaylı Sonuçlar:</h3>
                    <!-- Detaylı sonuçlar buraya JS ile eklenecek -->
                </div>
                <button class="restart-button" id="restartButton">Yeniden Başla</button>
            </div>
        </div>
    </div>
    
    <!-- Nasıl Oynanır Modal'ı -->
    <div class="modal-overlay" id="howToPlayModal">
        <div class="modal-content">
            <h3>Nasıl Oynanır? 🎮</h3>
            <ul>
                <li>1-Soruları dikkatlice oku.</li>
                <li>2-Doğru cevabı işaretle.</li>
                <li>3-Yanlış yaparsan endişelenme, cevabın açıklamasını okuyup öğrenebileceksin.</li>
                <li>4-Skor kısmında kaç soruyu doğru yanıtladığını görebilirsin.</li>
                <li>5-Her soru için 20 saniye süren var. İyi şanslar!</li>
            </ul>
            <button class="modal-start-button" id="modalStartButton">Hazırsan Başlayalım!</button>
        </div>
    </div>

    <script>
        // DOM elementlerini seçme
        const gameContainer = document.getElementById('gameContainer');
        const startScreen = document.getElementById('startScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultScreen = document.getElementById('resultScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const scoreValue = document.getElementById('scoreValue');
        const progressBar = document.getElementById('progressBar');
        const questionCard = document.getElementById('questionCard');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const explanationElement = document.getElementById('explanation');
        const nextButton = document.getElementById('nextButton');
        const finalScoreElement = document.getElementById('finalScore');
        const scoreCommentElement = document.getElementById('scoreComment');
        const detailedResultsContainer = document.getElementById('detailedResults');
        const howToPlayModal = document.getElementById('howToPlayModal');
        const modalStartButton = document.getElementById('modalStartButton');
        const timerValueElement = document.getElementById('timerValue'); // Yeni eklenen sayaç elemanı

        // Oyun verileri
        const questions = [
            {
                question: "Fotosentez sırasında bitkiler hangi gazı kullanır?",
                options: ["Oksijen", "Karbondioksit", "Azot", "Hidrojen"],
                correctAnswer: "Karbondioksit",
                explanation: "Fotosentez, bitkilerin güneş ışığı kullanarak karbondioksit ve suyu glikoz ve oksijene dönüştürme sürecidir."
            },
            {
                question: "Dünya'nın kendi ekseni etrafındaki dönüşü neyi oluşturur?",
                options: ["Mevsimleri", "Gelgitleri", "Gece ve gündüzü", "Ay tutulmalarını"],
                correctAnswer: "Gece ve gündüzü",
                explanation: "Dünya'nın kendi ekseni etrafındaki 24 saatlik dönüşü, gece ve gündüzün oluşmasına neden olur."
            },
            {
                question: "Elektrik devresinde ampulün ışık vermesi için aşağıdakilerden hangisi gereklidir?",
                options: ["Açık devre", "Direnç", "Anahtarın kapalı olması", "Led lamba"],
                correctAnswer: "Anahtarın kapalı olması",
                explanation: "Ampulün ışık vermesi için elektrik akımının kesintisiz bir döngüde (kapalı devre) akması gerekir."
            },
            {
                question: "Kalıtımın temel birimi nedir?",
                options: ["Gen", "Hücre", "DNA", "Enzim"],
                correctAnswer: "Gen",
                explanation: "Genler, canlıların kalıtsal özelliklerini taşıyan DNA parçalarıdır ve kalıtımın temel birimleridir."
            },
            {
                question: "Saf bir maddenin ısı alarak sıcaklığı sabit kalıyorsa ne gerçekleşiyor olabilir?",
                options: ["Yoğunlaşma", "Erime", "Isınma", "Buharlaşma"],
                correctAnswer: "Erime",
                explanation: "Saf bir madde erirken (katıdan sıvıya geçerken) veya kaynarken (sıvıdan gaza geçerken) aldığı ısıyı hal değiştirmek için kullanır ve sıcaklığı sabit kalır."
            }
        ];

        let currentQuestionIndex = 0;
        let correctAnswersCount = 0;
        const totalQuestions = questions.length;
        let answeredQuestionsResults = [];
        let timerInterval; // Sayaç için değişken
        const initialTime = 20; // Her soru için süre

        // Başlangıç ekranını göster
        function showStartScreen() {
            startScreen.style.display = 'flex';
            quizScreen.style.display = 'none';
            resultScreen.style.display = 'none';
            showHowToPlayModal();
        }

        // Oyunu başlat
        function startGame() {
            currentQuestionIndex = 0;
            correctAnswersCount = 0;
            answeredQuestionsResults = [];
            scoreValue.textContent = correctAnswersCount; // Sadece doğru sayısı göster
            progressBar.style.width = '0%';
            startScreen.style.display = 'none';
            quizScreen.style.display = 'flex';
            resultScreen.style.display = 'none';
            hideHowToPlayModal();
            displayQuestion();
        }

        // Soruyu ekranda göster
        function displayQuestion() {
            resetTimer(); // Yeni soru için sayacı sıfırla
            const questionData = questions[currentQuestionIndex];
            questionText.textContent = questionData.question;
            optionsContainer.innerHTML = '';
            
            feedbackMessage.classList.remove('show');
            explanationElement.classList.remove('show');
            nextButton.style.display = 'none';
            
            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option-button');
                button.textContent = option;
                const clickHandler = () => {
                    checkAnswer(option, questionData.correctAnswer, questionData.explanation);
                    button.removeEventListener('click', clickHandler);
                };
                button.addEventListener('click', clickHandler);
                optionsContainer.appendChild(button);
            });
            startTimer(); // Soruyu gösterdikten sonra sayacı başlat
        }

        // Cevabı kontrol et
        function checkAnswer(selectedOption, correctAnswer, explanation, isTimeout = false) {
            clearInterval(timerInterval); // Cevap verilince sayacı durdur

            Array.from(optionsContainer.children).forEach(button => {
                button.classList.add('disabled');
                const newButton = button.cloneNode(true);
                button.parentNode.replaceChild(newButton, button);
            });

            let isCorrect = (selectedOption === correctAnswer);

            Array.from(optionsContainer.children).forEach(button => {
                if (button.textContent === correctAnswer) {
                    button.classList.add('correct');
                } else if (button.textContent === selectedOption) {
                    button.classList.add('wrong');
                }
            });

            if (isCorrect) {
                correctAnswersCount++;
                feedbackMessage.textContent = "Doğru Cevap! 🎉";
                feedbackMessage.style.color = 'var(--correct-color)';
            } else if (isTimeout) {
                feedbackMessage.textContent = "Süre Doldu! ⌛";
                feedbackMessage.style.color = 'var(--wrong-color)';
                selectedOption = "Süre doldu";
            } else {
                feedbackMessage.textContent = "Yanlış Cevap 😥";
                feedbackMessage.style.color = 'var(--wrong-color)';
            }

            scoreValue.textContent = correctAnswersCount; // Sadece doğru sayısı göster
            feedbackMessage.classList.add('show');
            explanationElement.textContent = explanation;
            explanationElement.classList.add('show');
            nextButton.style.display = 'block';

            answeredQuestionsResults.push({
                question: questions[currentQuestionIndex].question,
                userAnswer: selectedOption,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            });
        }

        // Sonraki soruya geç
        function nextQuestion() {
            currentQuestionIndex++;
            updateProgressBar();
            if (currentQuestionIndex < totalQuestions) {
                displayQuestion();
            } else {
                endGame();
            }
        }

        // İlerleme çubuğunu güncelle
        function updateProgressBar() {
            const progress = (currentQuestionIndex / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Oyunu bitir ve sonuçları göster
        function endGame() {
            clearInterval(timerInterval); // Oyun bitince sayacı durdur
            quizScreen.style.display = 'none';
            resultScreen.style.display = 'flex';
            finalScoreElement.textContent = `${correctAnswersCount}/${totalQuestions}`;
            scoreCommentElement.textContent = getScoreComment(correctAnswersCount);
            displayDetailedResults();
        }

        // Detaylı sonuçları ekranda göster
        function displayDetailedResults() {
            detailedResultsContainer.innerHTML = '<h3>Detaylı Sonuçlar:</h3>';
            answeredQuestionsResults.forEach((result, index) => {
                const resultItem = document.createElement('div');
                resultItem.classList.add('result-item');
                resultItem.classList.add(result.isCorrect ? 'correct-answer' : 'wrong-answer');
                
                // Cevapları aynı satırda göstermek için HTML yapısını güncellendi
                const answersHtml = result.isCorrect 
                    ? `<p class="answers-line"><strong>Cevabınız:</strong> <span style="color: var(--correct-color);">${result.userAnswer} ✔️</span></p>`
                    : `<p class="answers-line"><strong>Cevabınız:</strong> <span style="color: var(--wrong-color);">${result.userAnswer} ❌</span> | <strong>Doğru Cevap:</strong> ${result.correctAnswer}</p>`;
                
                resultItem.innerHTML = `
                    <p><strong>Soru ${index + 1}:</strong> ${result.question}</p>
                    ${answersHtml}
                `;
                detailedResultsContainer.appendChild(resultItem);
            });
        }

        // Skora göre yorum yap
        function getScoreComment(finalCorrectAnswersCount) {
            if (finalCorrectAnswersCount === totalQuestions) {
                return "Harikasın, tam bir fen bilgisi ustasısın! 🤩";
            } else if (finalCorrectAnswersCount >= (totalQuestions) / 2) {
                return "İyi iş çıkardın! Bilgilerini daha da geliştirebilirsin. 👍";
            } else {
                return "Fen bilgisi yolculuğun yeni başlıyor! Biraz daha pratikle harikalar yaratabilirsin. ✨";
            }
        }
        
        function showHowToPlayModal() {
            howToPlayModal.classList.add('show');
        }

        function hideHowToPlayModal() {
            howToPlayModal.classList.remove('show');
        }

        // Sayaç fonksiyonları
        function startTimer() {
            let timeLeft = initialTime;
            timerValueElement.textContent = timeLeft;
            timerValueElement.style.color = 'inherit';
            timerInterval = setInterval(() => {
                timeLeft--;
                timerValueElement.textContent = timeLeft;
                if (timeLeft <= 5) {
                    timerValueElement.style.color = 'var(--wrong-color)';
                } else {
                    timerValueElement.style.color = 'inherit';
                }
                if (timeLeft <= 0) {
                    // Süre dolduğunda yanlış cevap ver ve sonraki soruya geç
                    checkAnswer(null, questions[currentQuestionIndex].correctAnswer, questions[currentQuestionIndex].explanation, true);
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerValueElement.textContent = initialTime;
            timerValueElement.style.color = 'inherit';
        }

        // Event listener'lar
        startButton.addEventListener('click', showHowToPlayModal);
        modalStartButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', startGame);

        document.addEventListener('DOMContentLoaded', showStartScreen);
    </script>
</body>
</html>
